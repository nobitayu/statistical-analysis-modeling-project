# 逻辑回归模型优化对比分析报告

## 一、模型概述

本报告对逻辑回归模型的**原始版本**和**优化版本**进行了详细的性能对比。

- **原始模型（Model 1）**：基础Logistic回归，使用原始特征
- **优化模型（Model 2）**：应用特征工程（分箱、二次项、标准化）的Logistic回归

两个模型均采用相同的 **70%/30%** 训练/测试集划分（set.seed(42)），确保结果的可比性。

---

## 二、原始模型详细结果

### 2.1 模型特征与形式

**模型公式：**
```
is_hot_f ~ publish_hour + title_length + tags_count + 
           has_question_f + has_exclamation_f + 
           is_weekend_f + tag_appeared_in_title_count + subscriber
```

**使用的特征：**
- `publish_hour`（连续，发布时间小时）
- `title_length`（连续，标题字符数）
- `tags_count`（连续，标签数量）
- `has_question_f`（分类，0/1）
- `has_exclamation_f`（分类，0/1）
- `is_weekend_f`（分类，0/1）
- `tag_appeared_in_title_count`（连续，标签出现次数）
- `subscriber`（连续，频道订阅数）

### 2.2 系数与显著性

| 特征 | 系数 (Beta) | 优势比 (OR) | P 值 | 显著性 |
|------|-----------|-----------|------|--------|
| publish_hour | 0.0297 | 1.0301 | 0.000372 | *** |
| title_length | -0.03235 | 0.9682 | <2e-16 | *** |
| tags_count | -0.01068 | 0.9894 | 0.747 |  |
| has_question_f=1 | -0.09089 | 0.9133 | 0.503 |  |
| has_exclamation_f=1 | 0.7516 | 2.1204 | 9.91e-08 | *** |
| is_weekend_f=1 | -0.07629 | 0.9266 | 0.283 |  |
| tag_appeared_in_title_count | 0.0674 | 1.0697 | 0.007586 | ** |
| subscriber | 0.000037 | 1.000037 | 0.276 |  |

**显著变量总结：**
- 显著正向：`publish_hour` , `has_exclamation_f` , `tag_appeared_in_title_count` 
- 显著负向：`title_length` 
- 不显著：`tags_count`, `has_question_f`, `is_weekend_f`, `subscriber`

### 2.3 测试集性能评估

#### 默认阈值 (t = 0.20)
| 指标 | 数值 |
|------|------|
| **Accuracy** | 0.7573 |
| **Precision** | 0.2890 |
| **Recall** | 0.4416 |
| **Specificity** | 0.8120 |
| **F1** | 0.3494 |
| **AUC** | 0.7026 |

混淆矩阵：
- TP（真正例）= 87
- FP（假正例）= 214
- TN（真负例）= 924
- FN（假负例）= 110

#### 最优阈值 (t = 0.19, F1 最大化)
| 指标 | 数值 |
|------|------|
| **Accuracy** | 0.7446 |
| **Precision** | 0.2844 |
| **Recall** | 0.4822 |
| **Specificity** | 0.7900 |
| **F1** | 0.3578 |

混淆矩阵：
- TP = 95
- FP = 239
- TN = 899
- FN = 102

#### 优化前后对比（原始模型内部）
| 指标 | t=0.20 | t=0.19 | 变化 |
|------|--------|--------|------|
| Accuracy | 0.7573 | 0.7446 | -0.0127 ↓ |
| Precision | 0.2890 | 0.2844 | -0.0046 ↓ |
| Recall | 0.4416 | 0.4822 | +0.0406 ↑ |
| Specificity | 0.8120 | 0.7900 | -0.0220 ↓ |
| F1 | 0.3494 | 0.3578 | +0.0084 ↑ |

---

## 三、优化模型详细结果

### 3.1 模型特征与形式

**模型公式：**
```
is_hot_f ~ publish_hour_cat + subscriber_cat + tags_count_cat +
           title_length_scaled + I(title_length_scaled^2) +
           tag_appeared_in_title_count_scaled + 
           has_question_f + has_exclamation_f + is_weekend_f
```

### 3.2 特征工程优化说明

#### 优化 1：发布时间分箱 (`publish_hour_cat`)
**分箱方案：**
- 凌晨 (0-5 点)：822 个视频
- 清晨 (6-8 点)：288 个视频
- 白天 (9-17 点)：1997 个视频
- 晚高峰 (18-23 点)：1343 个视频

**为什么优化？**
- 捕捉"发布时段"的非线性效应（不同时间段用户行为规律不同）
- 更符合媒体平台的运营直觉

#### 优化 2：订阅数分箱 (`subscriber_cat`)
**分箱方案（按 log 转换）：**
- 小频道 (log < 5)：152 个视频
- 中频道 (log 5-10)：363 个视频
- 大频道 (log > 10)：3935 个视频

**为什么优化？**
- 订阅数严重右偏，分箱更好地反映"频道等级"
- 避免线性假设对数值巨大差异的压缩

#### 优化 3：标题长度二次项
**原始统计：**
- 最小值：4 字
- 中位数：48 字
- 平均值：49.84 字
- 最大值：100 字

**模型形式：** `title_length_scaled + I(title_length_scaled^2)`

**为什么优化？**
- 验证"标题是否过短/过长都不好"的假设
- 二次项系数显著 → 存在非线性关系

#### 优化 4：标签数量分箱 (`tags_count_cat`)
**分箱方案：**
- 少 (≤3 个)：373 个视频
- 中 (4-6 个)：379 个视频
- 多 (>6 个)：3698 个视频

#### 优化 5：连续变量标准化
- `title_length_scaled` = scale(title_length)
- `tag_appeared_in_title_count_scaled` = scale(tag_appeared_in_title_count)
- `publish_hour_scaled` = scale(publish_hour)

**为什么优化？**
- 系数的绝对大小更有可比性
- 避免量纲差异（小时 vs 订阅数）影响解释

### 3.3 系数与显著性

| 特征 | 系数 (Beta) | 优势比 (OR) | P 值 | 显著性 |
|------|-----------|-----------|------|--------|
| publish_hour_cat=清晨 | -0.6337 | 0.5306 | 0.02758 | * |
| publish_hour_cat=白天 | -0.3261 | 0.7217 | 0.03234 | * |
| publish_hour_cat=晚高峰 | 0.3716 | 1.4500 | 0.01279 | * |
| subscriber_cat=中频道(5-10) | -0.3066 | 0.7360 | 0.63336 |  |
| subscriber_cat=大频道(>10) | 1.7093 | 5.5248 | 0.00104 | ** |
| tags_count_cat=中(4-6) | 0.1980 | 1.2190 | 0.50647 |  |
| tags_count_cat=多(>6) | 0.3070 | 1.3594 | 0.20795 |  |
| title_length_scaled | -0.6525 | 0.5207 | <2e-16 | *** |
| I(title_length_scaled^2) | 0.0295 | 1.0299 | 0.54152 |  |
| tag_appeared_in_title_count_scaled | 0.1098 | 1.1161 | 0.07386 | . |
| has_question_f=1 | 0.0532 | 1.0546 | 0.80515 |  |
| has_exclamation_f=1 | 0.6246 | 1.8674 | 1.49e-05 | *** |
| is_weekend_f=1 | -0.1820 | 0.8336 | 0.19458 |  |

**显著变量总结：**
- 显著正向：`publish_hour_cat=晚高峰` , `subscriber_cat=大频道` , `has_exclamation_f` 
- 显著负向：`publish_hour_cat=清晨` , `publish_hour_cat=白天` , `title_length_scaled` 
- 边界显著：`tag_appeared_in_title_count_scaled` (p=0.07386) .

### 3.4 测试集性能评估

#### 默认阈值 (t = 0.20)
| 指标 | 数值 |
|------|------|
| **Accuracy** | 0.7513 |
| **Precision** | 0.2997 |
| **Recall** | 0.5127 |
| **Specificity** | 0.7926 |
| **F1** | 0.3783 |
| **AUC** | 0.7550 |

混淆矩阵：
- TP = 101
- FP = 236
- TN = 902
- FN = 96

#### 最优阈值 (t = 0.16, F1 最大化)
| 指标 | 数值 |
|------|------|
| **Accuracy** | 0.6929 |
| **Precision** | 0.2831 |
| **Recall** | 0.7056 |
| **Specificity** | 0.6907 |
| **F1** | 0.4041 |

混淆矩阵：
- TP = 139
- FP = 352
- TN = 786
- FN = 58

#### 优化前后对比（优化模型内部）
| 指标 | t=0.20 | t=0.16 | 变化 |
|------|--------|--------|------|
| Accuracy | 0.7513 | 0.6929 | -0.0584 ↓ |
| Precision | 0.2997 | 0.2831 | -0.0166 ↓ |
| Recall | 0.5127 | 0.7056 | +0.1929 ↑ |
| Specificity | 0.7926 | 0.6907 | -0.1019 ↓ |
| F1 | 0.3783 | 0.4041 | +0.0258 ↑ |

---

## 四、原始模型 vs 优化模型对比

### 4.1 总体性能对比

| 指标 | 原始模型 (t=0.20) | 优化模型 (t=0.20) | 变化 | 优化幅度 |
|------|------------------|------------------|------|---------|
| **AUC** | 0.7026 | 0.7550 | +0.0524 | **+7.5%** |
| **Accuracy** | 0.7573 | 0.7513 | -0.0060 | -0.8% |
| **Precision** | 0.2890 | 0.2997 | +0.0107 | +3.7% |
| **Recall** | 0.4416 | 0.5127 | +0.0711 | **+16.1%** |
| **Specificity** | 0.8120 | 0.7926 | -0.0194 | -2.4% |
| **F1** | 0.3494 | 0.3783 | +0.0289 | **+8.3%** |

### 4.2 最优阈值对比

| 指标 | 原始模型 (t=0.19) | 优化模型 (t=0.16) | 变化 | 优化幅度 |
|------|------------------|------------------|------|---------|
| **最优阈值** | 0.19 | 0.16 | -0.03 | 降低 15.8% |
| **Accuracy** | 0.7446 | 0.6929 | -0.0517 | -6.9% |
| **Precision** | 0.2844 | 0.2831 | -0.0013 | -0.5% |
| **Recall** | 0.4822 | 0.7056 | +0.2234 | **+46.3%** |
| **Specificity** | 0.7900 | 0.6907 | -0.0993 | -12.6% |
| **F1** | 0.3578 | 0.4041 | +0.0463 | **+12.9%** |

### 4.3 混淆矩阵对比（最优阈值）

**原始模型 (t=0.19)：**
```
           预测：0    预测：1
实际：0      899       239
实际：1      102        95
```

**优化模型 (t=0.16)：**
```
           预测：0    预测：1
实际：0      786       352
实际：1       58       139
```

**对比解读：**
| 指标 | 原始 | 优化 | 变化 |
|------|------|------|------|
| 抓住的爆款数 (TP) | 95 | 139 | +46 个 (+48.4%) |
| 漏掉的爆款数 (FN) | 102 | 58 | -44 个 (-43.1%) |
| 误报的非爆款数 (FP) | 239 | 352 | +113 个 (+47.3%) |
| 正确识别的非爆款数 (TN) | 899 | 786 | -113 个 (-12.6%) |

**核心发现：** 优化模型在相同阈值范围内，能抓到 **46 个更多的爆款**，但代价是多误报了 **113 个非爆款**。

### 4.4 关键指标解读

#### AUC 提升（+7.5%）
- 原始模型：0.7026（中等区分度）
- 优化模型：0.7550（良好区分度）
- **优化模型在整个阈值范围内都更能区分爆款和非爆款**

#### Recall 大幅提升（最优阈值 +46.3%）
- 原始模型：0.4822（抓住 48.2% 的爆款）
- 优化模型：0.7056（抓住 70.6% 的爆款）
- **优化模型更善于发现爆款视频**

#### F1 提升（最优阈值 +12.9%）
- 原始模型：0.3578
- 优化模型：0.4041
- **在兼顾准确率与召回的目标下，优化模型表现更好**

#### Precision 基本持平 
- 原始模型：0.2844
- 优化模型：0.2831
- **优化模型误报率没有明显改善，仍需改进**

### 4.5 特征重要性对比

#### 原始模型 - 通过 P 值排序
1. **`title_length`**（p<2e-16）：最强信号
2. **`has_exclamation_f`**（p=9.91e-08）：强感叹号效应
3. **`tag_appeared_in_title_count`**（p=0.0076）：中等效应
4. **`publish_hour`**（p=0.0004）：弱但显著

#### 优化模型 - 通过 P 值排序
1. **`title_length_scaled`**（p<2e-16）：最强信号
2. **`has_exclamation_f`**（p=1.49e-05）：强感叹号效应（更显著！）
3. **`publish_hour_cat`** 系列（p<0.03）：
   - 晚高峰：+1.45x odds（正向）
   - 白天：-0.72x odds（负向）
   - 清晨：-0.53x odds（负向）
4. **`subscriber_cat=大频道`**（p=0.00104）：大频道是 **5.52 倍** 的爆款概率

#### 关键发现
| 方面 | 原始模型 | 优化模型 | 改进 |
|------|---------|---------|------|
| 标题长度 | 线性负向 | 线性负向（更强），但二次项不显著 |  过短/过长都不好的假设 **未支持** |
| 发布时间 | 线性+3% odds | 分时段效应明显，晚高峰最优 |  发现了"晚高峰优势" |
| 订阅数 | 不显著 (OR≈1) | **大频道 5.52 倍优势** |  **关键发现** |
| 感叹号 | 2.12 倍优势 | 1.87 倍优势（略弱） |  分箱后效应减弱 |

---

## 五、优化方案评价

### 5.1 优化成果

1. **AUC 提升 7.5%**
   - 整体区分能力显著提升
   - 从"中等"升级为"良好"

2. **Recall 大幅提升 46.3%**
   - 能发现 70% 的爆款（vs 原来的 48%）
   - 对于"挖掘潜在爆款"的业务场景极为有利

3. **F1 提升 12.9%**
   - 在兼顾准确率与召回的综合目标下更优

4. **发现关键特征关系**
   - 晚高峰发布有显著优势（+45% odds）
   - **大频道是爆款的强预测因子**（5.52 倍）

5. **模型更可解释**
   - 分箱特征更直观（"大频道"比数字 log 值好理解）
   - 不同时段的效果一目了然

### 5.2 优化的局限 

1. **Precision 未改善**
   - 误报率仍在 70% 左右（预测为爆款的视频中只有 28% 真的爆款）
   - 原因：数据类别严重不平衡（爆款占 11.7%）

2. **标题长度二次项不显著**
   - p=0.54152（不显著）
   - **结论：标题是否过短/过长都不好 → 假设不成立**
   - 实际上是**越短越好**（强烈的负向线性关系）

3. **Accuracy 略降**
   - 由于过度强调 Recall，牺牲了整体准确率

4. **最优阈值降低**
   - 从 0.19 降至 0.16
   - 模型需要更低的置信度才能判断为爆款

